import{d as F,r as p,G as _,c,g as n,a as m,F as x,x as C,l as k,u as t,h as g,t as f,z as E,H as R,I as S,e as B,o as v,f as U}from"./vendor.22e69707.js";import{b as N,v as P,a as T}from"./validation.36d38792.js";import{_ as q,a as b}from"./index.10d21fa2.js";import{T as L}from"./Title.d051302b.js";const $={id:"register",class:"page"},I=["onSubmit"],j={class:"alert alert-danger mb-4"},z={class:"form-btns"},A=["disabled"],D=U("\u{1F3B2} Login"),G=F({setup(H){const d=p(!1),w=R(),y=S("authService"),l=p(!1),i=p([]),s=_({username:"",email:"",password:""}),a=_({username:"",email:"",password:""});function h(){let o=!0;i.value=[],a.username="",a.email="",a.password="",a.username=N(s.username),a.username&&(o=!1),a.email=P(s.email),a.email&&(o=!1),a.password=T(s.password),a.password&&(o=!1),o&&V()}async function V(){var o,r,u;try{l.value=!0;const e={username:s.username,email:s.email,password:s.password};(await y.signup(e)).id&&w.push({path:"/login?email="+s.email})}catch(e){e.response&&(((o=e.response.data)==null?void 0:o.statusCode)===400?i.value=e.response.data.message:(((r=e.response.data)==null?void 0:r.statusCode)===401||((u=e.response.data)==null?void 0:u.statusCode)===409)&&i.value.push(e.response.data.message))}finally{l.value=!1}}return(o,r)=>{const u=B("router-link");return v(),c("div",$,[n(L,{title:"Register"}),m("form",{onSubmit:E(h,["prevent"]),class:"",novalidate:""},[i.value.length?(v(!0),c(x,{key:0},C(i.value,e=>(v(),c("div",j," \u26A0\uFE0F "+f(e),1))),256)):k("",!0),n(b,{class:"mb-3",label:"Username",id:"username",type:"text",modelValue:t(s).username,"onUpdate:modelValue":r[0]||(r[0]=e=>t(s).username=e),disabled:l.value,required:"",error:t(a).username,description:"3-20 characters long"},null,8,["modelValue","disabled","error"]),n(b,{class:"mb-3",label:"Email",id:"email",type:"email",modelValue:t(s).email,"onUpdate:modelValue":r[1]||(r[1]=e=>t(s).email=e),disabled:l.value,required:"",error:t(a).email},null,8,["modelValue","disabled","error"]),n(b,{class:"mb-4",label:"Password",id:"password",type:d.value?"text":"password",modelValue:t(s).password,"onUpdate:modelValue":r[3]||(r[3]=e=>t(s).password=e),disabled:l.value,required:"",error:t(a).password,description:"8-32 characters long"},{button:g(()=>[m("button",{type:"button",class:"btn btn-primary",onClick:r[2]||(r[2]=e=>d.value=!d.value),"aria-label":"Toggle Show Old Password"},f(d.value?"\u{1F576}\uFE0F":"\u{1F453}"),1)]),_:1},8,["type","modelValue","disabled","error"]),m("div",z,[m("button",{type:"submit",class:"btn btn-primary w-100 mb-3 fs-5",disabled:l.value}," \u{1F4CB} "+f(l.value?"Loading...":"Register"),9,A),n(u,{to:"/login",class:"btn btn-outline-secondary w-100 mb-3 fs-5"},{default:g(()=>[D]),_:1})])],40,I)])}}});var W=q(G,[["__scopeId","data-v-7e23ef8e"]]);export{W as default};
