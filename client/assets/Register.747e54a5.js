import{d as S,r as c,E as g,c as v,g as d,a as i,F as E,x as k,l as R,u as r,h as w,f as h,t as f,z as B,p as U,b as I,G as N,H as P,e as T,o as _}from"./vendor.1d2f60e7.js";import{b as q,v as L,a as $}from"./validation.36d38792.js";import{_ as j,a as b}from"./index.11f52fc9.js";import{T as z}from"./Title.608e70fc.js";const y=u=>(U("data-v-0b7cd320"),u=u(),I(),u),A={id:"register",class:"page"},D=["onSubmit"],G={class:"alert alert-danger mb-4"},H={class:"form-btns"},M=["disabled"],O=y(()=>i("span",null,"\u{1F4CB}",-1)),J=y(()=>i("span",null,"\u{1F3B2}",-1)),K=h(" Login"),Q=S({setup(u){const m=c(!1),V=N(),F=P("authService"),l=c(!1),n=c([]),s=g({username:"",email:"",password:""}),a=g({username:"",email:"",password:""});function x(){let o=!0;n.value=[],a.username="",a.email="",a.password="",a.username=q(s.username),a.username&&(o=!1),a.email=L(s.email),a.email&&(o=!1),a.password=$(s.password),a.password&&(o=!1),o&&C()}async function C(){var o,t,p;try{l.value=!0;const e={username:s.username,email:s.email,password:s.password};(await F.signup(e)).id&&V.push({path:"/login?email="+s.email})}catch(e){e.response&&(((o=e.response.data)==null?void 0:o.statusCode)===400?n.value=e.response.data.message:(((t=e.response.data)==null?void 0:t.statusCode)===401||((p=e.response.data)==null?void 0:p.statusCode)===409)&&n.value.push(e.response.data.message))}finally{l.value=!1}}return(o,t)=>{const p=T("router-link");return _(),v("div",A,[d(z,{title:"Register"}),i("form",{onSubmit:B(x,["prevent"]),class:"",novalidate:""},[n.value.length?(_(!0),v(E,{key:0},k(n.value,e=>(_(),v("div",G," \u26A0\uFE0F "+f(e),1))),256)):R("",!0),d(b,{class:"mb-3",label:"Username",id:"username",type:"text",modelValue:r(s).username,"onUpdate:modelValue":t[0]||(t[0]=e=>r(s).username=e),disabled:l.value,required:"",error:r(a).username,description:"3-20 characters long"},null,8,["modelValue","disabled","error"]),d(b,{class:"mb-3",label:"Email",id:"email",type:"email",modelValue:r(s).email,"onUpdate:modelValue":t[1]||(t[1]=e=>r(s).email=e),disabled:l.value,required:"",error:r(a).email},null,8,["modelValue","disabled","error"]),d(b,{class:"mb-4",label:"Password",id:"password",type:m.value?"text":"password",modelValue:r(s).password,"onUpdate:modelValue":t[3]||(t[3]=e=>r(s).password=e),disabled:l.value,required:"",error:r(a).password,description:"8-32 characters long"},{button:w(()=>[i("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=e=>m.value=!m.value),"aria-label":"Toggle Show Old Password"},[i("span",null,f(m.value?"\u{1F576}\uFE0F":"\u{1F453}"),1)])]),_:1},8,["type","modelValue","disabled","error"]),i("div",H,[i("button",{type:"submit",class:"btn btn-primary w-100 mb-3 fs-5",disabled:l.value},[O,h(" "+f(l.value?"Loading...":"Register"),1)],8,M),d(p,{to:"/login",class:"btn btn-outline-secondary w-100 mb-3 fs-5"},{default:w(()=>[J,K]),_:1})])],40,D)])}}});var se=j(Q,[["__scopeId","data-v-0b7cd320"]]);export{se as default};
